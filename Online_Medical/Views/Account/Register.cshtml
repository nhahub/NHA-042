@model Online_Medical.ViewModel.RegisterUserViewModel

@{
    Layout = null;
    ViewData["Title"] = "Register";
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Online Medical</title>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet" />
    <style>
        /* تهيئة عامة للتصميم الجديد (مستوحى من التصميم الثاني) */
        :root {
            --primary-color: #2b98e1; /* اللون الأزرق المميز */
            --text-color: #333;
            --box-bg: rgba(255, 255, 255, 0.2); /* خلفية بيضاء شفافة للصندوق */
            --glass-border: 1px solid rgba(255, 255, 255, 0.3);
            --border-radius: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: auto; /* السماح بالتمرير إذا كان النموذج كبيراً */
            /* يجب التأكد من مسار الصورة، تم استخدام اسم موحد */
            background-image: url('/assets/img/background2.png');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .main-wrapper {
            display: flex;
            width: 90%;
            max-width: 1200px;
            margin: 50px auto; /* مساحة علوية وسفلية للمحتوى */
            align-items: center;
            justify-content: space-between;
        }

        /* -------------------- قسم النص الترويجي -------------------- */
        .promo-text {
            flex-basis: 45%;
            padding-left: 20px;
        }

        .main-heading {
            font-size: 4.5rem;
            font-weight: 800;
            line-height: 1.1;
            color: #333;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
        }

        .highlight {
            color: var(--primary-color);
            font-weight: 800;
        }

        /* -------------------- صندوق التسجيل (Glassmorphism) -------------------- */
        .signup-box {
            flex-basis: 50%;
            max-width: 500px;
            padding: 40px;
            background: var(--box-bg);
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px); /* تأثير الزجاج المُضبَّب */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            border: var(--glass-border);
        }

        .signup-title {
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 25px;
            color: var(--text-color);
            text-align: center;
        }

        .signup-form {
            display: flex;
            flex-direction: column;
            gap: 20px; /* مسافة أكبر بين حقول الإدخال */
        }

        .row-group {
            display: flex;
            gap: 15px;
        }

            .row-group > div {
                flex: 1;
            }

        /* تنسيق الحقل الموحد (لإضافة الأيقونة والـ Label) */
        .form-field-group {
            position: relative;
            margin-bottom: 20px; /* المسافة بين الحقل ورسالة الخطأ */
        }

        /* تنسيق المدخلات */
        input[type="text"],
        input[type="email"],
        input[type="tel"],
        input[type="password"],
        input[type="date"],
        select {
            width: 100%;
            padding: 15px 15px 15px 45px; /* مساحة لليسار للأيقونة */
            border: 1px solid #ccc;
            border-radius: 10px;
            font-size: 1rem;
            color: var(--text-color);
            background-color: rgba(255, 255, 255, 0.9); /* خلفية بيضاء شبه شفافة للحقل نفسه */
            transition: border-color 0.3s, box-shadow 0.3s;
            line-height: normal; /* لضمان ثبات الارتفاع */
        }

        select {
            /* تعديل الـ padding لحقل الجنس ليتوافق مع شكله */
            padding-right: 15px;
            padding-left: 15px;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23666' d='M6 9l-4-4 1.41-1.41L6 6.17l2.59-2.58L10 5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 10px center;
            padding-right: 30px;
        }

            input:focus, select:focus {
                border-color: var(--primary-color);
                outline: none;
                box-shadow: 0 0 8px rgba(43, 152, 225, 0.5);
            }

        /* الأيقونات داخل الحقول */
        .form-field-group .icon {
            position: absolute;
            top: 50%;
            left: 15px;
            transform: translateY(-50%);
            color: #999;
            pointer-events: none; /* لمنع الأيقونة من اعتراض النقرات */
        }

        /* ضبط الأيقونة على اليمين لبعض الحقول (مثل الهاتف أو تأكيد كلمة المرور) */
        .form-field-group.icon-right input {
            padding-left: 15px;
            padding-right: 45px;
        }

        .form-field-group.icon-right .icon {
            left: auto;
            right: 15px;
        }

        /* رسائل التحقق من الصحة (Validation Messages) */
        .text-danger {
            font-size: 0.9rem;
            color: #dc3545;
            display: block;
            margin-top: 5px;
            text-align: left;
            position: absolute; /* تجربة أولى: وضع مطلق */
            bottom: -30px; /* لتحديد موقعها بدقة أسفل الحقل */
            left: 0;
        }

        /* ملخص التحقق من الصحة */
        .alert-danger {
            padding: 10px;
            border-radius: 8px;
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
            margin-bottom: 20px;
            font-size: 1rem;
        }

        /* زر التسجيل */
        .signup-btn {
            padding: 12px 30px;
            margin-top: 15px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
            width: 100%; /* جعله يأخذ عرض الحاوية */
        }

            .signup-btn:hover {
                background-color: #217bb4;
                transform: translateY(-2px);
            }

        /* إخفاء الـ Labels في الـ HTML حيث أننا نعتمد على الـ Placeholder */
        .control-label {
            display: none;
        }
    </style>
</head>
<body>

    <div class="main-wrapper">
        <div class="promo-text">
            <h1 class="main-heading">
                The best Services <br />
                <span class="highlight">for your Health</span>
            </h1>
        </div>

        <div class="signup-box">
            <h2 class="signup-title">Sign up</h2>
            <form asp-action="Register" method="post" class="signup-form">
                <div asp-validation-summary="All" class="text-danger alert alert-danger" role="alert" style="display:none;"></div>
                <div class="row-group">
                    <div class="form-field-group">
                        <label asp-for="FirstName" class="control-label">First name</label>
                        <i class="fas fa-user icon"></i>
                        <input asp-for="FirstName" type="text" placeholder="First Name" required />
                        <span asp-validation-for="FirstName" class="text-danger"></span>
                    </div>
                    <div class="form-field-group">
                        <label asp-for="LastName" class="control-label">Last name</label>
                        <i class="fas fa-user icon"></i>
                        <input asp-for="LastName" type="text" placeholder="Last Name" required />
                        <span asp-validation-for="LastName" class="text-danger"></span>
                    </div>
                </div>

                <div class="row-group">
                    <div class="form-field-group">
                        <label asp-for="UserName" class="control-label">Username</label>
                        <i class="fas fa-at icon"></i>
                        <input asp-for="UserName" type="text" placeholder="Username" required />
                        <span asp-validation-for="UserName" class="text-danger"></span>
                    </div>
                    <div class="form-field-group">
                        <label asp-for="Email" class="control-label">Email</label>
                        <i class="fas fa-envelope icon"></i>
                        <input asp-for="Email" type="email" placeholder="Email Address" required />
                        <span asp-validation-for="Email" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-field-group icon-right">
                    <label asp-for="PhoneNumber" class="control-label">Phone Number</label>
                    <i class="fas fa-mobile-alt icon"></i>
                    <input asp-for="PhoneNumber" type="tel" placeholder="Phone Number (+20 1xxxxxxxxx)" required />
                    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                </div>

                <div class="row-group">
                    <div class="form-field-group">
                        <label asp-for="DateOfBirth" class="control-label">Date of Birth</label>
                        <i class="far fa-calendar-alt icon"></i>
                        <input asp-for="DateOfBirth" type="date" placeholder="Date of Birth" required />
                        <span asp-validation-for="DateOfBirth" class="text-danger"></span>
                    </div>
                    <div class="form-field-group">
                        <label asp-for="Gender" class="control-label">Gender</label>
                        <select asp-for="Gender"
                                asp-items="Html.GetEnumSelectList<Online_Medical.Services.Gender>()"
                                required>
                            <option value="" disabled selected>Gender</option>
                        </select>
                        <span asp-validation-for="Gender" class="text-danger"></span>
                    </div>
                </div>

                <div class="row-group">
                    <div class="form-field-group">
                        <label asp-for="Password" class="control-label">Password</label>
                        <i class="fas fa-lock icon"></i>
                        <input asp-for="Password" type="password" placeholder="Password" required />
                        <span asp-validation-for="Password" class="text-danger"></span>
                    </div>
                    <div class="form-field-group">
                        <label asp-for="ConfirmPassword" class="control-label">Confirm Password</label>
                        <i class="fas fa-lock icon"></i>
                        <input asp-for="ConfirmPassword" type="password" placeholder="Confirm Password" required />
                        <span asp-validation-for="ConfirmPassword" class="text-danger"></span>
                    </div>
                </div>

                <button type="submit" class="signup-btn">
                    Sign up
                </button>
            </form>
        </div>
    </div>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 1. تحديد الحد الأقصى لتاريخ الميلاد (اليوم)
            const today = new Date();
            const year = today.getFullYear();
            const month = String(today.getMonth() + 1).padStart(2, '0');
            const day = String(today.getDate()).padStart(2, '0');
            const currentDate = `${year}-${month}-${day}`;

            const dateInput = document.getElementById('DateOfBirth');
            if (dateInput) {
                dateInput.setAttribute('max', currentDate);
            }

            // 2. إظهار الـ Validation Summary (ملخص الأخطاء) إذا كانت موجودة
            const validationSummary = document.querySelector('.alert-danger');
            // التأكد من أن ul داخل الـ validation summary تحتوي على عناصر
            if (validationSummary && validationSummary.querySelector('ul') && validationSummary.querySelector('ul').children.length > 0) {
                 validationSummary.style.display = 'block';
            }

            // 3. إضافة فئة (class) لحقول التاريخ الفارغة لإخفاء أيقونة التاريخ الافتراضية إذا أردت
            // (تم إزالته من الـ CSS لتبسيط الكود، ولكن يمكن إضافته هنا إذا لزم الأمر)

        });
    </script>

</body>
</html>